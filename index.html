<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <title></title>
    <script src="https://aframe.io/releases/1.0.4/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/drawing_utils@0.8.4/drawing_utils.d.ts"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/holistic@0.8.4/holistic.js"></script>
    <script src="https://raw.githack.com/AR-js-org/AR.js/master/aframe/build/aframe-ar.js"></script>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <a-scene embedded arjs="sourceType: webcam;">
      <a-assets>
        <video id="video" autoplay src="asset/video/Inegollaw.m4v" crossorigin="anonymous"></video>
        <video id="video2" autoplay src="asset/video/Test 3D_VP9.webm" crossorigin="anonymous"></video>
      </a-assets>
      <a-marker preset="hiro" markerhandler>
        <a-video rotation="-90 0 0" id="video-top" src="asset/video/Test 3D_VP9.webm" autoplay="false" loop="false" width="1.5" height="1"></a-video>
        <a-plane rotation="-90 0 0" id="video-bottom" src="asset/video/Inegollaw.m4v" visible="false" width="1.5" height="1" material="shader: flat"></a-plane>
      </a-marker>

      <a-entity camera></a-entity>
    </a-scene>

    <script>
      AFRAME.registerComponent('markerhandler', {
        init: function() {
          this.el.sceneEl.addEventListener('markerFound', function(e) {
            var videoTop = document.getElementById('video-top');
            var videoBottom = document.getElementById('video-bottom');
    
            videoTop.play();
            videoBottom.setAttribute('visible', 'true');
    
            videoTop.addEventListener('ended', function() {
              videoTop.setAttribute('visible', 'false');
            });
    
            videoBottom.addEventListener('ended', function() {
              videoBottom.setAttribute('visible', 'false');
            });
          });
        }
      });
    </script>
  </body>
</html>

